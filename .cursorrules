# Pivot Project - OpenAPI Component Library

è¿™æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ OpenAPI ç»„ä»¶åº“é¡¹ç›®ã€‚

## é¡¹ç›®æ¶æ„
- åŸºäº Next.js 15 + App Router
- ä½¿ç”¨ shadcn/ui registry ç³»ç»Ÿè¿›è¡Œç»„ä»¶å‘å¸ƒ
- TypeScript + Tailwind CSS
- pnpm ä½œä¸ºåŒ…ç®¡ç†å™¨
- content-collections ç®¡ç†æ–‡æ¡£å†…å®¹

## ç›®å½•ç»“æ„
- `app/` - Next.js app router é¡µé¢å’Œè·¯ç”±
- `registry/` - å¯å‘å¸ƒçš„ç»„ä»¶æºç ï¼ˆæ ¸å¿ƒç»„ä»¶åº“ï¼‰
- `content/` - MDX æ–‡æ¡£å†…å®¹
- `__registry__/` - æ„å»ºåçš„ registry æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
- `components/` - ç½‘ç«™ UI ç»„ä»¶ï¼ˆéå‘å¸ƒç»„ä»¶ï¼‰
- `lib/` - å·¥å…·å‡½æ•°å’Œé…ç½®
- `hooks/` - React hooks
- `styles/` - å…¨å±€æ ·å¼
- `public/` - é™æ€èµ„æº

## ç»„ä»¶åˆ†ç±»
- `registry/pivot/` - åŸå­ç»„ä»¶ï¼ˆatomsï¼‰å’ŒåŸºç¡€ç»„ä»¶ - **ç”¨äº OpenAPI æ¸²æŸ“ï¼Œå¯åˆ†å‘**
- `registry/lib/` - registry/pivot ç»„ä»¶ä¸“ç”¨çš„å·¥å…·å‡½æ•°å’Œ hooks - **å¯åˆ†å‘**
- `registry/example/` - å¤æ‚ç»„ä»¶å’Œå¸ƒå±€æ¨¡æ¿ï¼ˆlayoutsï¼‰
- `components/` - æ–‡æ¡£ç«™ç‚¹ä¸“ç”¨ç»„ä»¶ - **ä¸åˆ†å‘**
- `hooks/` - æ–‡æ¡£ç«™ç‚¹ä¸“ç”¨ hooks - **ä¸åˆ†å‘**

## ğŸ”„ ä»£ç å¤ç”¨ä¼˜å…ˆåŸåˆ™ (é‡è¦!)

**åœ¨ç¼–å†™ä»»ä½•æ–°ä»£ç ä¹‹å‰ï¼Œå¿…é¡»é¦–å…ˆæ£€æŸ¥ç°æœ‰çš„å·¥å…·å‡½æ•°å’Œ hooks æ˜¯å¦å·²æä¾›æ‰€éœ€åŠŸèƒ½ã€‚**

### ä¼˜å…ˆçº§é¡ºåºï¼š

#### å¯¹äº `registry/pivot/` ç»„ä»¶ï¼š
1. **ç°æœ‰ registry hooks** (`registry/lib/use-openapi.ts` ç­‰)
2. **ç°æœ‰ registry å·¥å…·å‡½æ•°** (`registry/lib/resolve-ref.ts`, `registry/lib/generate-example.ts` ç­‰)
3. **ç¬¬ä¸‰æ–¹åº“**
4. **è‡ªå®šä¹‰å®ç°** (æœ€åé€‰æ‹©)

#### å¯¹äº `components/` ç»„ä»¶ï¼ˆæ–‡æ¡£ç«™ç‚¹ï¼‰ï¼š
1. **ç°æœ‰ hooks** (`hooks/use-openapi.ts`, `lib/i18n.ts` ç­‰)
2. **ç°æœ‰å·¥å…·å‡½æ•°** (`lib/utils.ts` ç­‰)
3. **ç¬¬ä¸‰æ–¹åº“**
4. **è‡ªå®šä¹‰å®ç°** (æœ€åé€‰æ‹©)

### ğŸš« ä¸¥æ ¼ç¦æ­¢çš„è¡Œä¸ºï¼š

#### å¯¹äº registry/pivot ç»„ä»¶ï¼š
1. **ç¦æ­¢é‡å¤å®šä¹‰å·¥å…·å‡½æ•°**ï¼š
   - `resolveRef()` - å¿…é¡»ä½¿ç”¨ `../lib/resolve-ref`
   - `generateExample()` - å¿…é¡»ä½¿ç”¨ `../lib/generate-example`
   - `useOpenApi` - å¿…é¡»ä½¿ç”¨ `../lib/use-openapi`

2. **ç¦æ­¢ä½¿ç”¨æ–‡æ¡£ç«™ç‚¹çš„ hooks**ï¼š
   - ä¸èƒ½å¯¼å…¥ `@/hooks/` ä¸‹çš„ä»»ä½• hooks
   - å¿…é¡»ä½¿ç”¨ `registry/lib/` ä¸‹çš„å¯¹åº”ç‰ˆæœ¬

#### å¯¹äº components ç»„ä»¶ï¼ˆæ–‡æ¡£ç«™ç‚¹ï¼‰ï¼š
1. **ç¦æ­¢ä½¿ç”¨ registry/lib å·¥å…·**ï¼š
   - åº”è¯¥ä½¿ç”¨ `@/hooks/` å’Œ `@/lib/` ä¸‹çš„å·¥å…·
   - ä¸è¦å¯¼å…¥ `registry/lib/` ä¸‹çš„å†…å®¹

3. **ç¦æ­¢æ‰‹åŠ¨æ‹¼æ¥æ ·å¼ç±»å**ï¼š
   - å¿…é¡»ä½¿ç”¨ `cn()` å·¥å…·å‡½æ•°åˆå¹¶ className

### âœ… å¿…é¡»éµå¾ªçš„æ¨¡å¼ï¼š

#### registry/pivot ç»„ä»¶æ­£ç¡®å¯¼å…¥ï¼š
```tsx
// æ­£ç¡®çš„å¯¼å…¥å’Œä½¿ç”¨æ–¹å¼
import { useOpenApi } from "../lib/use-openapi";
import { resolveRef } from "../lib/resolve-ref";
import { generateExample } from "../lib/generate-example";
import { cn } from "@/lib/utils";

// æ­£ç¡®ä½¿ç”¨ç°æœ‰ hooks
const openApi = useOpenApi(spec);
const operations = openApi.getOperationsByTag();

// æ­£ç¡®ä½¿ç”¨å·¥å…·å‡½æ•°
const resolved = resolveRef(reference, components);
```

#### components ç»„ä»¶æ­£ç¡®å¯¼å…¥ï¼š
```tsx
// æ­£ç¡®çš„å¯¼å…¥å’Œä½¿ç”¨æ–¹å¼
import { useOpenApi } from "@/hooks/use-openapi";
import { useI18n } from "@/registry/lib/i18n/";
import { cn } from "@/lib/utils";
import { resolveRef } from "@/utils/resolveRef";

// æ­£ç¡®ä½¿ç”¨ç°æœ‰ hooks
const openApi = useOpenApi(spec);
const operations = openApi.getOperationsByTag();

// æ­£ç¡®ä½¿ç”¨å·¥å…·å‡½æ•°
const resolved = resolveRef(reference, components);
```

## ç¼–ç è§„èŒƒ
1. æ‰€æœ‰ç»„ä»¶å¿…é¡»ä½¿ç”¨ TypeScript
2. ä½¿ç”¨ Tailwind CSS è¿›è¡Œæ ·å¼è®¾è®¡
3. ç»„ä»¶å¿…é¡»æœ‰æ˜ç¡®çš„ props ç±»å‹å®šä¹‰
4. å¯å‘å¸ƒç»„ä»¶æ”¾åœ¨ registry/ ç›®å½•ä¸‹ï¼Œå¹¶ä¸”æ‰å¹³æ”¾ç½®ï¼Œä¸è¦åµŒå¥—
5. ç»„ä»¶æ–‡ä»¶åä½¿ç”¨ kebab-caseï¼ˆå¦‚ï¼šmagic-card.tsxï¼‰
6. å¯¼å‡ºçš„ç»„ä»¶ä½¿ç”¨ PascalCaseï¼ˆå¦‚ï¼šMagicCardï¼‰
7. ä½¿ç”¨ forwardRef å¤„ç† ref ä¼ é€’
8. ä½¿ç”¨ class-variance-authority å¤„ç†å˜ä½“æ ·å¼

## ä¾èµ–ç®¡ç†
- ä¼˜å…ˆä½¿ç”¨ @radix-ui ä½œä¸ºæ— å¤´ç»„ä»¶
- ä½¿ç”¨ lucide-react ä½œä¸ºå›¾æ ‡åº“
- ä½¿ç”¨ motion å¤„ç†åŠ¨ç”»æ•ˆæœ
- ä½¿ç”¨ tailwind-merge åˆå¹¶ className

## ğŸ” ä»£ç å®¡æŸ¥æ£€æŸ¥ç‚¹

### åœ¨å®¡æŸ¥ä»£ç æ—¶ï¼Œå¿…é¡»æ£€æŸ¥ï¼š
1. **é‡å¤ä»£ç æ£€æŸ¥**ï¼š
   - registry/pivot ç»„ä»¶æ˜¯å¦æœ‰é‡å¤çš„ `resolveRef` å‡½æ•°å®šä¹‰ï¼Ÿ
   - registry/pivot ç»„ä»¶æ˜¯å¦æœ‰é‡å¤çš„ `useOpenApi` å‡½æ•°å®šä¹‰ï¼Ÿ
   - æ˜¯å¦æ­£ç¡®ä½¿ç”¨äº†ç°æœ‰çš„ hooks å’Œå·¥å…·å‡½æ•°ï¼Ÿ

2. **å¯¼å…¥æ£€æŸ¥**ï¼š
   - registry/pivot ç»„ä»¶æ˜¯å¦æ­£ç¡®å¯¼å…¥ `../lib/use-openapi` è€Œéé‡å¤å®ç°ï¼Ÿ
   - registry/pivot ç»„ä»¶æ˜¯å¦æ­£ç¡®å¯¼å…¥ `../lib/resolve-ref`ï¼Ÿ
   - components ç»„ä»¶æ˜¯å¦æ­£ç¡®å¯¼å…¥ `@/hooks/` ä¸‹çš„ hooksï¼Ÿ
   - æ˜¯å¦æ­£ç¡®ä½¿ç”¨ `cn()` å¤„ç†æ ·å¼ï¼Ÿ

3. **æ¨¡å¼åŒ¹é…æ£€æŸ¥**ï¼š
   - å‘ç° `function resolveRef` æˆ– `const resolveRef =` â†’ æ£€æŸ¥æ˜¯å¦åœ¨æ­£ç¡®ä½ç½®
   - å‘ç° `getOperationsByTag` æœ¬åœ°å®šä¹‰ â†’ è¦æ±‚ä½¿ç”¨å¯¹åº”çš„ `useOpenApi` hook
   - å‘ç°æ‰‹åŠ¨ç±»åæ‹¼æ¥ â†’ è¦æ±‚ä½¿ç”¨ `cn()` å‡½æ•°

## ç»„ä»¶å‘å¸ƒè§„èŒƒ
- æ¯ä¸ªç»„ä»¶éœ€åœ¨ registry.json ä¸­æ³¨å†Œ
- ç»„ä»¶éœ€è¦åŒ…å« titleã€description
- æ˜ç¡®å£°æ˜ä¾èµ–å…³ç³»
- æä¾›å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹

## æ–‡æ¡£è§„èŒƒ
- ä½¿ç”¨ MDX ç¼–å†™ç»„ä»¶æ–‡æ¡£
- åŒ…å«ç»„ä»¶ API è¯´æ˜
- æä¾›å®é™…ä½¿ç”¨ç¤ºä¾‹
- åŒ…å«å®‰è£…å’Œä½¿ç”¨æŒ‡å—

## é‡è¦æé†’
- ä¸è¦ä¿®æ”¹ç°æœ‰ç»„ä»¶çš„æ ·å¼å’Œé€»è¾‘ï¼Œåªè°ƒæ•´ç›®å½•ç»“æ„å’Œå¼•å…¥è·¯å¾„
- æ‰€æœ‰å˜æ›´ä»…é™äº pivot ç›®å½•
- ä¸¥æ ¼éµå¾ªç°ä»£åŒ–ç»„ä»¶åº“çš„ç»„ç»‡æ–¹å¼å’Œæœ€ä½³å®è·µ
- **åŒºåˆ†æ–‡æ¡£ç«™ç‚¹ç»„ä»¶å’Œå¯åˆ†å‘ç»„ä»¶çš„ä¾èµ–å…³ç³»**
- **æ¯æ¬¡ç¼–å†™ä»£ç å‰ï¼Œå…ˆæ£€æŸ¥ç°æœ‰èµ„æºï¼Œé¿å…é‡å¤é€ è½®å­**
