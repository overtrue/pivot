{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "laravel-generator",
  "type": "registry:ui",
  "dependencies": [
    "lucide-react",
    "openapi-types",
    "react"
  ],
  "files": [
    {
      "path": "registry/default/ui/laravel-generator.tsx",
      "content": "import { Code2 } from \"lucide-react\";\nimport type { OpenAPIV3 } from \"openapi-types\";\nimport React from \"react\";\n\n// 代码生成器参数接口\ninterface CodeGeneratorParams {\n  endpoint: string;\n  method: OpenAPIV3.HttpMethods;\n  parameters: OpenAPIV3.ParameterObject[];\n  requestBody?: OpenAPIV3.RequestBodyObject;\n  requestBodyExample: unknown;\n}\n\n// 代码生成器接口\ninterface CodeGenerator {\n  id: string;\n  label: string;\n  getIcon(): React.ReactNode;\n  generateCode(params: CodeGeneratorParams): string;\n}\n\n// LaravelGenerator implementation\nexport class LaravelGeneratorClass implements CodeGenerator {\n  id = \"laravel\";\n  label = \"Laravel\";\n\n  getIcon() {\n    return <Code2 size={16} />;\n  }\n\n  generateCode(params: CodeGeneratorParams): string {\n    const { endpoint, method, requestBodyExample, requestBody } = params;\n\n    // 生成格式化后的PHP数组表示，使用较小的缩进\n    const formattedRequestBody = this.convertToPhpArray(requestBodyExample, 4);\n    const guzzleRequestBody = this.convertToPhpArray(requestBodyExample, 8);\n\n    return `<?php\n// 使用 Laravel HTTP 客户端\nuse Illuminate\\\\Support\\\\Facades\\\\Http;\n\nfunction call_${method.toLowerCase()}()\n{\n    $response = Http::withHeaders([\n        'Content-Type' => 'application/json',\n        'Accept' => 'application/json',\n    ])${[\"POST\", \"PUT\", \"PATCH\"].includes(method) && requestBody\n        ? `->${method.toLowerCase()}(\"${endpoint}\",\n        ${formattedRequestBody}\n    );`\n        : `.${method.toLowerCase()}(\"${endpoint}\");`\n      }\n\n    return $response->json();\n}\n\n// 或者使用 Laravel 的 Guzzle 封装\npublic function call_${method.toLowerCase()}_guzzle()\n{\n    $client = new \\\\GuzzleHttp\\\\Client();\n\n    $response = $client->request(\"${method}\", \"${endpoint}\", [\n        'headers' => [\n            'Content-Type' => 'application/json',\n            'Accept' => 'application/json',\n        ],${[\"POST\", \"PUT\", \"PATCH\"].includes(method) && requestBody\n        ? `\n        'json' => ${guzzleRequestBody}`\n        : \"\"\n      }\n    ]);\n\n    return json_decode($response->getBody(), true);\n}`;\n  }\n\n  // 将 JSON 对象转换为 PHP 数组格式，优化宽度\n  private convertToPhpArray(obj: unknown, indent: number = 0): string {\n    if (obj === null) return 'null';\n    if (typeof obj === 'string') return `'${obj.replace(/'/g, \"\\\\'\")}'`;\n    if (typeof obj === 'number') return obj.toString();\n    if (typeof obj === 'boolean') return obj ? 'true' : 'false';\n\n    if (Array.isArray(obj)) {\n      if (obj.length === 0) return '[]';\n      const items = obj.map(item => this.convertToPhpArray(item, indent + 2));\n      return `[\\n${' '.repeat(indent + 2)}${items.join(\",\\n\" + ' '.repeat(indent + 2))}\\n${' '.repeat(indent)}]`;\n    }\n\n    if (typeof obj === 'object' && obj !== null) {\n      const entries = Object.entries(obj as Record<string, unknown>);\n      if (entries.length === 0) return '[]';\n\n      const items = entries.map(([key, value]) =>\n        `'${key}' => ${this.convertToPhpArray(value, indent + 2)}`\n      );\n      return `[\\n${' '.repeat(indent + 2)}${items.join(\",\\n\" + ' '.repeat(indent + 2))}\\n${' '.repeat(indent)}]`;\n    }\n\n    return 'null';\n  }\n}\n\n// React component wrapper\ninterface LaravelGeneratorProps {\n  params?: CodeGeneratorParams;\n  className?: string;\n}\n\nconst LaravelGeneratorComponent = React.forwardRef<\n  HTMLDivElement,\n  LaravelGeneratorProps\n>(({ params, className }, ref) => {\n  if (!params) {\n    return (\n      <div ref={ref} className={className}>\n        <div className=\"flex items-center gap-2 mb-2\">\n          <Code2 size={16} />\n          <span className=\"font-medium\">Laravel</span>\n        </div>\n        <div className=\"bg-neutral-100 dark:bg-neutral-800 p-4 rounded-md text-neutral-500 dark:text-neutral-400\">\n          No parameters provided for code generation\n        </div>\n      </div>\n    );\n  }\n\n  const generator = new LaravelGeneratorClass();\n  const code = generator.generateCode(params);\n\n  return (\n    <div ref={ref} className={className}>\n      <div className=\"flex items-center gap-2 mb-2\">\n        {generator.getIcon()}\n        <span className=\"font-medium\">{generator.label}</span>\n      </div>\n      <div className=\"bg-neutral-100 dark:bg-neutral-800 rounded-md overflow-hidden w-full\">\n        <pre className=\"p-4 overflow-x-auto w-full max-w-full\" style={{ wordBreak: 'break-all', whiteSpace: 'pre-wrap', maxWidth: '100%' }}>\n          <code className=\"text-sm language-php\" style={{ maxWidth: '100%', display: 'block' }}>{code}</code>\n        </pre>\n      </div>\n    </div>\n  );\n});\n\nLaravelGeneratorComponent.displayName = \"LaravelGenerator\";\n\nexport {\n  LaravelGeneratorComponent as LaravelGenerator,\n  type LaravelGeneratorProps\n};\n\n",
      "type": "registry:ui",
      "target": "components/pivot/laravel-generator.tsx"
    }
  ]
}